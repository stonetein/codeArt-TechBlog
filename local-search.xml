<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Position Locator</title>
    <link href="/codeArt-TechBlog/2024/07/06/Position-Locator/"/>
    <url>/codeArt-TechBlog/2024/07/06/Position-Locator/</url>
    
    <content type="html"><![CDATA[<h2 id="usage"><a href="#usage" class="headerlink" title="usage"></a>usage</h2><ul><li>點擊要建立locator的位置，按下script</li></ul><h2 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h2><video width="850" controls><source src="https://lookdev.codeart3d.xyz/blog_video/maya/Position_Locator.mp4" type="video/mp4"></video><h2 id="scripts"><a href="#scripts" class="headerlink" title="scripts"></a>scripts</h2><div class="note note-success">            <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> maya.cmds <span class="hljs-keyword">as</span> cmds <br><br>sel=cmds.ls(sl=<span class="hljs-number">1</span>) <br>bigbig = <span class="hljs-number">20</span> <br>lc = cmds.spaceLocator()[<span class="hljs-number">0</span>] <br>sp = cmds.listRelatives( lc, s=<span class="hljs-number">1</span> )[<span class="hljs-number">0</span>]<br><br>cmds.setAttr(<span class="hljs-string">&quot;%s.overrideEnabled&quot;</span> % sp, <span class="hljs-number">1</span> )<br>cmds.setAttr(<span class="hljs-string">&quot;%s.overrideColor&quot;</span> % sp, <span class="hljs-number">9</span> )<br><br>cmds.setAttr( <span class="hljs-string">&quot;%s.localScale&quot;</span> % sp, bigbig, bigbig, bigbig ) <br>cmds.xform( lc,ws=<span class="hljs-number">1</span>, ro=cmds.xform(sel[<span class="hljs-number">0</span>],q=<span class="hljs-number">1</span>,ws=<span class="hljs-number">1</span>,ro=<span class="hljs-number">1</span>)) <br>cmds.xform( lc,ws=<span class="hljs-number">1</span>,t=cmds.xform(sel[<span class="hljs-number">0</span>],q=<span class="hljs-number">1</span>,ws=<span class="hljs-number">1</span>,t=<span class="hljs-number">1</span>))<br></code></pre></td></tr></table></figure>          </div>]]></content>
    
    
    <categories>
      
      <category>maya</category>
      
    </categories>
    
    
    <tags>
      
      <tag>maya</tag>
      
      <tag>tool</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MoCap GraphPlus</title>
    <link href="/codeArt-TechBlog/2024/07/05/MoCapGraphPlus/"/>
    <url>/codeArt-TechBlog/2024/07/05/MoCapGraphPlus/</url>
    
    <content type="html"><![CDATA[<h2 id="usage-function"><a href="#usage-function" class="headerlink" title="usage function"></a>usage function</h2><ul><li>oaSmoothKeys：選取軸向進行平滑</li><li>Get value：取得目前軸向的數值</li><li>Translate(Rotate)X,Y,Z：選擇anim curve</li><li>Set Keyframe：取得目前軸向峰值keypose</li><li>Value Zero：取得目前軸向值將 anim curver 第一格歸</li></ul><h2 id="Gui"><a href="#Gui" class="headerlink" title="Gui"></a>Gui</h2><img src="/codeArt-TechBlog/img/maya/curve_editor_tool.png" width="500" style="display: block; margin-left: 0;"><h2 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h2><video width="850" controls><source src="https://lookdev.codeart3d.xyz/video/maya/Graph_Editor_tool.mp4" type="video/mp4"></video><h2 id="scripts"><a href="#scripts" class="headerlink" title="scripts"></a>scripts</h2><h3 id="python2"><a href="#python2" class="headerlink" title="python2"></a>python2</h3><div class="note note-info">            <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pymel.core <span class="hljs-keyword">as</span> pm<br><span class="hljs-keyword">import</span> maya.cmds <span class="hljs-keyword">as</span> cmds<br><br><br><span class="hljs-keyword">if</span> cmds.window(<span class="hljs-string">&quot;GE_ui_window&quot;</span>, exists=<span class="hljs-literal">True</span>): <span class="hljs-comment">#If the window exists</span><br>    cmds.deleteUI(<span class="hljs-string">&quot;GE_ui_window&quot;</span>) <span class="hljs-comment">#Delete it</span><br><br>cmds.window(<span class="hljs-string">&quot;GE_ui_window&quot;</span>, title=<span class="hljs-string">&quot;My custom Graph Editor&quot;</span>) <span class="hljs-comment">#Create your custom win</span><br>cmds.frameLayout(<span class="hljs-string">&quot;GE_ui_frameLayout&quot;</span>, p=<span class="hljs-string">&quot;GE_ui_window&quot;</span>, lv=<span class="hljs-literal">False</span>, bv=<span class="hljs-literal">False</span> ) <br><br><br><span class="hljs-keyword">if</span> cmds.scriptedPanel(<span class="hljs-string">&quot;GE_ui_scriptedPanel&quot;</span>, exists=<span class="hljs-literal">True</span>): <span class="hljs-comment">#If the scriptel panel already exists</span><br>    cmds.deleteUI(<span class="hljs-string">&quot;GE_ui_scriptedPanel&quot;</span>) <span class="hljs-comment">#Delete it</span><br>cmds.scriptedPanel(<span class="hljs-string">&quot;GE_ui_scriptedPanel&quot;</span>, unParent=<span class="hljs-literal">True</span>, <span class="hljs-built_in">type</span>=<span class="hljs-string">&quot;graphEditor&quot;</span>)<br>cmds.scriptedPanel( <span class="hljs-string">&quot;GE_ui_scriptedPanel&quot;</span>, e=<span class="hljs-literal">True</span>, parent=<span class="hljs-string">&quot;GE_ui_window|GE_ui_frameLayout&quot;</span>) <span class="hljs-comment">#parent the scripted panel to your frame layout</span><br><br><br>TranslateX = <span class="hljs-number">0</span><br>TranslateY = <span class="hljs-number">0</span><br>TranslateZ = <span class="hljs-number">0</span><br>RotateX = <span class="hljs-number">0</span><br>RotateY = <span class="hljs-number">0</span><br>RotateZ = <span class="hljs-number">0</span><br>    <br>minV = <span class="hljs-literal">False</span><br>maxV = <span class="hljs-literal">False</span><br><br>kf_list = []<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">sl</span>():<br>    depNodeName = cmds.ls(sl = <span class="hljs-literal">True</span>)<br>    <span class="hljs-keyword">if</span> depNodeName:<br>        depNodeName = cmds.ls(sl = <span class="hljs-literal">True</span>)[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">else</span>:<br>        depNodeName = cmds.ls(sl = <span class="hljs-literal">True</span>)<br>    <span class="hljs-keyword">return</span> depNodeName<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Get</span>():<br>    TranslateX = cmds.getAttr(sl() + <span class="hljs-string">&#x27;.translateX&#x27;</span>)<br>    cmds.floatField(<span class="hljs-string">&#x27;TranslateX_V&#x27;</span>, e=<span class="hljs-number">1</span>,v = TranslateX )<br>    TranslateY = cmds.getAttr(sl() + <span class="hljs-string">&#x27;.translateY&#x27;</span>)<br>    cmds.floatField(<span class="hljs-string">&#x27;TranslateY_V&#x27;</span>, e=<span class="hljs-number">1</span>,v = TranslateY )<br>    TranslateZ = cmds.getAttr(sl() + <span class="hljs-string">&#x27;.translateZ&#x27;</span>)<br>    cmds.floatField(<span class="hljs-string">&#x27;TranslateZ_V&#x27;</span>, e=<span class="hljs-number">1</span>,v = TranslateZ )<br>    RotateX = cmds.getAttr(sl() + <span class="hljs-string">&#x27;.rotateX&#x27;</span>)<br>    cmds.floatField(<span class="hljs-string">&#x27;RotateX_V&#x27;</span>, e=<span class="hljs-number">1</span>,v = RotateX )<br>    RotateY = cmds.getAttr(sl() + <span class="hljs-string">&#x27;.rotateY&#x27;</span>)<br>    cmds.floatField(<span class="hljs-string">&#x27;RotateY_V&#x27;</span>, e=<span class="hljs-number">1</span>,v = RotateY )<br>    RotateZ = cmds.getAttr(sl() + <span class="hljs-string">&#x27;.rotateZ&#x27;</span>)<br>    cmds.floatField(<span class="hljs-string">&#x27;RotateZ_V&#x27;</span>, e=<span class="hljs-number">1</span>,v = RotateZ )<br>    <br>    time_v()<br>    <span class="hljs-keyword">global</span> TranslateX, TranslateY, TranslateZ, RotateX, RotateY, RotateZ<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">oaSmoothkeys</span>():<br>    curves=cmds.keyframe(q=<span class="hljs-number">1</span>, name=<span class="hljs-number">1</span>)<br>    <span class="hljs-comment">#Get the selected curves</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(curves) == <span class="hljs-number">0</span>:<br>        cmds.mel.error(<span class="hljs-string">&quot;Select at least 3 keys in the Graph Editor.&quot;</span>)<br>        <span class="hljs-comment">#Go</span><br>        <br>    prevVal = []<br>    currVal = []<br>    nextVal = []<br>    average = <span class="hljs-number">0.0</span><br>    keys = []<br>    <span class="hljs-comment">#frame numbers</span><br>    sizeOfKeys = <span class="hljs-number">0</span><br>    dupCurve = []<br>    dupCurveVal = []<br>    <span class="hljs-keyword">for</span> curve <span class="hljs-keyword">in</span> curves:<br>        keys=cmds.keyframe(curve, q=<span class="hljs-number">1</span>, sl=<span class="hljs-number">1</span>)<br>        <span class="hljs-comment">#Get the selected keys</span><br>        sizeOfKeys=<span class="hljs-built_in">len</span>(keys)<br>        <span class="hljs-comment">#The first and last key will not be touched.</span><br>        <span class="hljs-comment">#Therefore there must be at least 3 keys selected.</span><br>        <span class="hljs-keyword">if</span> sizeOfKeys&lt;<span class="hljs-number">3</span>:<br>            <span class="hljs-keyword">continue</span><br>            <span class="hljs-comment">#Duplicate the curve to store values in</span><br>            <br>        dupCurve=cmds.duplicate(curve)<br>        <span class="hljs-comment">#Start with frame 2, don&#x27;t touch last frame</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,sizeOfKeys - <span class="hljs-number">1</span>):<br>            prevVal=cmds.keyframe(curve, q=<span class="hljs-number">1</span>, vc=<span class="hljs-number">1</span>, time=(keys[i - <span class="hljs-number">1</span>],keys[i - <span class="hljs-number">1</span>]))<br>            currVal=cmds.keyframe(curve, q=<span class="hljs-number">1</span>, vc=<span class="hljs-number">1</span>, time=(keys[i],keys[i]))<br>            nextVal=cmds.keyframe(curve, q=<span class="hljs-number">1</span>, vc=<span class="hljs-number">1</span>, time=(keys[i + <span class="hljs-number">1</span>],keys[i + <span class="hljs-number">1</span>]))<br>            <span class="hljs-comment">#Calculate average</span><br>            average= (prevVal[<span class="hljs-number">0</span>] + currVal[<span class="hljs-number">0</span>] + nextVal[<span class="hljs-number">0</span>]) / <span class="hljs-number">3</span><br>            <span class="hljs-comment">#Store the value in the dup curve</span><br>            cmds.keyframe(dupCurve[<span class="hljs-number">0</span>], valueChange=average, absolute=<span class="hljs-number">1</span>, time=(keys[i],keys[i]))<br>            <br>        <span class="hljs-comment">#Apply the new values</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,sizeOfKeys - <span class="hljs-number">1</span>):<br>            dupCurveVal=cmds.keyframe(dupCurve[<span class="hljs-number">0</span>], q=<span class="hljs-number">1</span>, vc=<span class="hljs-number">1</span>, time=(keys[i],keys[i]))<br>            cmds.keyframe(curve, valueChange=dupCurveVal[<span class="hljs-number">0</span>], absolute=<span class="hljs-number">1</span>, time=(keys[i],keys[i]))<br>            <br>        cmds.delete(dupCurve[<span class="hljs-number">0</span>])<br><br>        <br><span class="hljs-comment">#if have a animLayer or not animLayer attr change name</span><br><span class="hljs-comment"># sample  1.original:   [ pSphere1_translateX ]</span><br><span class="hljs-comment">#         2.layer:      [ pSphere1_translateX_AnimLayer1_inputB ]</span><br><span class="hljs-comment">#         3.merge layer:[ pSphere1_translateX_Merged_Layer_inputB ]</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Sel_Attr</span>():<br>    crvAll = []<br>    <span class="hljs-keyword">for</span> atr <span class="hljs-keyword">in</span> cmds.listAttr(sl(),k=<span class="hljs-number">1</span>):<br>        <span class="hljs-comment"># print atr</span><br>        connectAtrs = cmds.listConnections(<span class="hljs-string">&#x27;%s.%s&#x27;</span>%(sl(),atr))<br>        <span class="hljs-comment"># print connectAtrs</span><br>        getAniCrv = cmds.ls(connectAtrs,typ=<span class="hljs-string">&#x27;animCurve&#x27;</span>)<br>        crvAll += getAniCrv<br>        <br>        <span class="hljs-keyword">if</span> getAniCrv:<br>            crvAll += getAniCrv<br>        <span class="hljs-keyword">if</span> connectAtrs:<br>            <span class="hljs-keyword">for</span> cta <span class="hljs-keyword">in</span> connectAtrs:<br>        <span class="hljs-comment"># print &#x27;----&#x27;, cta</span><br>                crvAll += cmds.listConnections(cta,<span class="hljs-built_in">type</span>=<span class="hljs-string">&#x27;animCurve&#x27;</span>)<span class="hljs-keyword">or</span> []<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">pass</span><br>        <span class="hljs-comment"># print connectAtrs</span><br>        Tx = [v <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> crvAll <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;translateX&quot;</span> <span class="hljs-keyword">in</span> v <span class="hljs-keyword">or</span> <span class="hljs-string">&quot;TranslateX1&quot;</span> <span class="hljs-keyword">in</span> v]<br>        Ty = [v <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> crvAll <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;translateY&quot;</span> <span class="hljs-keyword">in</span> v <span class="hljs-keyword">or</span> <span class="hljs-string">&quot;TranslateY1&quot;</span> <span class="hljs-keyword">in</span> v]<br>        Tz = [v <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> crvAll <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;translateZ&quot;</span> <span class="hljs-keyword">in</span> v <span class="hljs-keyword">or</span> <span class="hljs-string">&quot;TranslateZ1&quot;</span> <span class="hljs-keyword">in</span> v]<br>        Rx = [v <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> crvAll <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;rotate&quot;</span> <span class="hljs-keyword">in</span> v <span class="hljs-keyword">and</span> <span class="hljs-string">&quot;X&quot;</span> <span class="hljs-keyword">in</span> v <span class="hljs-keyword">or</span> <span class="hljs-string">&quot;inRotateX&quot;</span> <span class="hljs-keyword">in</span> v]<br>        Ry = [v <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> crvAll <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;rotate&quot;</span> <span class="hljs-keyword">in</span> v <span class="hljs-keyword">and</span> <span class="hljs-string">&quot;Y&quot;</span> <span class="hljs-keyword">in</span> v <span class="hljs-keyword">or</span> <span class="hljs-string">&quot;inRotateY&quot;</span> <span class="hljs-keyword">in</span> v]<br>        Rz = [v <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> crvAll <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;rotate&quot;</span> <span class="hljs-keyword">in</span> v <span class="hljs-keyword">and</span> <span class="hljs-string">&quot;Z&quot;</span> <span class="hljs-keyword">in</span> v <span class="hljs-keyword">or</span> <span class="hljs-string">&quot;inRotateZ&quot;</span> <span class="hljs-keyword">in</span> v]<br>    <span class="hljs-keyword">return</span> Tx, Ty, Tz, Rx, Ry, Rz<br>  <br><br><span class="hljs-comment">#Combine 2 lists into 1 dictionary</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Opt_Tx</span>():<br>    cmds.selectKey(Sel_Attr()[<span class="hljs-number">0</span>])<br>    cmds.FrameSelected()<br>    Get()<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Opt_Ty</span>():<br>    cmds.selectKey(Sel_Attr()[<span class="hljs-number">1</span>])<br>    cmds.FrameSelected()<br>    Get()<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Opt_Tz</span>():<br>    cmds.FrameSelected()<br>    cmds.selectKey(Sel_Attr()[<span class="hljs-number">2</span>])<br>    Get()<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">RotateX_Doit</span>():<br>    cmds.FrameSelected()<br>    cmds.selectKey(Sel_Attr()[<span class="hljs-number">3</span>])<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">RotateY_Doit</span>():<br>    cmds.FrameSelected()<br>    cmds.selectKey(Sel_Attr()[<span class="hljs-number">4</span>])<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">RotateZ_Doit</span>():<br>    cmds.FrameSelected()<br>    cmds.selectKey(Sel_Attr()[<span class="hljs-number">5</span>])<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">time_v</span>():<br>    n1 = cmds.keyframe(sl(), q =<span class="hljs-literal">True</span>)<br>    minV = <span class="hljs-built_in">min</span>(n1)<br>    maxV = <span class="hljs-built_in">max</span>(n1)<br>    cmds.playbackOptions(<span class="hljs-built_in">min</span> =minV, <span class="hljs-built_in">max</span> =  maxV)<br>    <br>    <span class="hljs-keyword">global</span> minV , maxV<br><br><br><span class="hljs-comment">#Combine 2 lists into 1 dictionary</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">setkeyframe</span>():<br>    selobj = cmds.keyframe(q=<span class="hljs-number">1</span>,n=<span class="hljs-number">1</span>)<br>    <span class="hljs-built_in">min</span> = minV<br>    <span class="hljs-built_in">max</span> = maxV<br>    <br>    axial_V = []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> selobj:<br>        <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;translateX&#x27;</span> <span class="hljs-keyword">in</span> i:<br>            axial_V = <span class="hljs-string">&#x27;.tx&#x27;</span><br>            <span class="hljs-built_in">print</span> axial_V<br>        <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;translateY&#x27;</span> <span class="hljs-keyword">in</span> i:<br>            axial_V = <span class="hljs-string">&#x27;.ty&#x27;</span><br>            <span class="hljs-built_in">print</span> axial_V<br>        <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;translateZ&#x27;</span> <span class="hljs-keyword">in</span> i:<br>            axial_V = <span class="hljs-string">&#x27;.tz&#x27;</span><br>            <span class="hljs-built_in">print</span> axial_V<br>        <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;rotate&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;X&#x27;</span> <span class="hljs-keyword">in</span> i:<br>            axial_V = <span class="hljs-string">&#x27;.rx&#x27;</span><br>            <span class="hljs-built_in">print</span> axial_V<br>        <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;rotate&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;Y&#x27;</span> <span class="hljs-keyword">in</span> i:<br>            axial_V = <span class="hljs-string">&#x27;.ry&#x27;</span><br>            <span class="hljs-built_in">print</span> axial_V<br>        <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;rotate&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;Z&#x27;</span> <span class="hljs-keyword">in</span> i:<br>            axial_V = <span class="hljs-string">&#x27;.rz&#x27;</span><br>            <span class="hljs-built_in">print</span> axial_V<br>            <br>    val_list = cmds.keyframe(sl() + axial_V, q = <span class="hljs-literal">True</span>, vc= <span class="hljs-literal">True</span>)<br>    key_list = cmds.keyframe(sl() + axial_V, q = <span class="hljs-literal">True</span>)<br>    <br>    <span class="hljs-comment"># print key_list, val_list</span><br>    kv_list = <span class="hljs-built_in">zip</span>(key_list,val_list)<br>    kv_list = <span class="hljs-built_in">sorted</span>(kv_list,key=<span class="hljs-keyword">lambda</span> x:x[<span class="hljs-number">0</span>])<br>    <br>    <span class="hljs-keyword">if</span> kf_list:<br>        kf_list = []<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">pass</span><br>           <br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(kv_list)):<br>        key, value = kv_list[i]<br>        bi, ai = i-<span class="hljs-number">1</span>, i+<span class="hljs-number">1</span><br>        <span class="hljs-comment">#If first is equal to -1 or the latter value is greater than the length -1 to skip </span><br>        <span class="hljs-keyword">if</span> bi == -<span class="hljs-number">1</span> <span class="hljs-keyword">or</span> ai &gt; (<span class="hljs-built_in">len</span>(kv_list)-<span class="hljs-number">1</span>):<span class="hljs-keyword">continue</span><br>        <br>        <span class="hljs-keyword">if</span> kv_list[i][<span class="hljs-number">0</span>] == <span class="hljs-built_in">min</span> +<span class="hljs-number">1</span> <span class="hljs-keyword">or</span> kv_list[i][<span class="hljs-number">0</span>] == <span class="hljs-built_in">max</span> -<span class="hljs-number">1</span>:<br>            <span class="hljs-comment"># Get the smallest keyframe of the length</span><br>            <span class="hljs-keyword">if</span> kv_list[i][<span class="hljs-number">0</span>] == <span class="hljs-built_in">min</span> +<span class="hljs-number">1</span>:<br>                    kf_list.append(<span class="hljs-built_in">min</span>)      <br>            <span class="hljs-comment"># Get the largest keyframe in length</span><br>            <span class="hljs-keyword">if</span> kv_list[i][<span class="hljs-number">0</span>] == <span class="hljs-built_in">max</span> -<span class="hljs-number">1</span>:            <br>                    kf_list.append(<span class="hljs-built_in">max</span>)<br>        <span class="hljs-comment">#Get the most extreme keyframe in length</span><br>        <span class="hljs-keyword">if</span> kv_list[i][<span class="hljs-number">1</span>] &gt; kv_list[bi][<span class="hljs-number">1</span>] <span class="hljs-keyword">and</span> kv_list[i][<span class="hljs-number">1</span>] &gt; kv_list[ai][<span class="hljs-number">1</span>]:<br>                kf_list.append(key)<br>        <span class="hljs-keyword">if</span> kv_list[i][<span class="hljs-number">1</span>] &lt; kv_list[bi][<span class="hljs-number">1</span>] <span class="hljs-keyword">and</span> kv_list[i][<span class="hljs-number">1</span>] &lt; kv_list[ai][<span class="hljs-number">1</span>]:<br>                kf_list.append(key)<br>            <br>    <span class="hljs-keyword">global</span> kf_list<br>    <br>    pm.mel.animLayerEditorOnSelect(<span class="hljs-string">&quot;BaseAnimation&quot;</span>, <span class="hljs-number">0</span>)<br>    cmds.animLayer((sl()), at = sl() ,aso =<span class="hljs-number">1</span> ) <br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> kf_list:<br>        cmds.setKeyframe(<span class="hljs-built_in">id</span> = <span class="hljs-literal">True</span>, t= (i), bd = <span class="hljs-literal">True</span>)        <br>              <br><span class="hljs-comment">#Value zero</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">ValueZero_Doit</span>():<br>    selobj = cmds.keyframe(q=<span class="hljs-number">1</span>,n=<span class="hljs-number">1</span>)<br>    <br>    axial_V = []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> selobj:<br>        <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;X&#x27;</span> <span class="hljs-keyword">in</span> i:<br>            axial_V = <span class="hljs-string">&#x27;.tx&#x27;</span><br>            cmds.currentTime(minV)<br>            TranslateX = cmds.getAttr(sl() + <span class="hljs-string">&#x27;.translateX&#x27;</span>)<br>            cmds.keyframe(an=<span class="hljs-string">&#x27;keys&#x27;</span>,r=<span class="hljs-number">1</span>, vc =(<span class="hljs-number">0</span> -TranslateX))<br>            Get()<br>            <span class="hljs-built_in">print</span> axial_V<br>        <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;Y&#x27;</span> <span class="hljs-keyword">in</span> i:<br>            axial_V = <span class="hljs-string">&#x27;.ty&#x27;</span><br>            TranslateY = cmds.getAttr(sl() + <span class="hljs-string">&#x27;.translateY&#x27;</span>)<br>            cmds.keyframe(an=<span class="hljs-string">&#x27;keys&#x27;</span>,r=<span class="hljs-number">1</span>, vc =(<span class="hljs-number">0</span>-TranslateY))<br>            Get()<br>            <span class="hljs-built_in">print</span> axial_V<br>        <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;Z&#x27;</span>  <span class="hljs-keyword">in</span> i:<br>            axial_V = <span class="hljs-string">&#x27;.tz&#x27;</span><br>            cmds.currentTime(minV)<br>            TranslateZ = cmds.getAttr(sl() + <span class="hljs-string">&#x27;.translateZ&#x27;</span>)<br>            cmds.keyframe(an=<span class="hljs-string">&#x27;keys&#x27;</span>,r=<span class="hljs-number">1</span>, vc =(<span class="hljs-number">0</span>-TranslateZ))<br>            Get()<br>            <span class="hljs-built_in">print</span> axial_V<br>        <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;rotate&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;X&#x27;</span> <span class="hljs-keyword">in</span> i:<br>            axial_V = <span class="hljs-string">&#x27;.rx&#x27;</span><br>            <span class="hljs-built_in">print</span> axial_V<br>        <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;rotate&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;Y&#x27;</span> <span class="hljs-keyword">in</span> i:<br>            axial_V = <span class="hljs-string">&#x27;.ry&#x27;</span><br>            <span class="hljs-built_in">print</span> axial_V<br>        <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;rotate&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;Z&#x27;</span> <span class="hljs-keyword">in</span> i:<br>            axial_V = <span class="hljs-string">&#x27;.rz&#x27;</span><br>            <span class="hljs-built_in">print</span> axial_V<br><br>cmds.showWindow(<span class="hljs-string">&quot;GE_ui_window&quot;</span>)<br><br>channelLayout = cmds.formLayout(<span class="hljs-string">&quot;GE_ui_scriptedPanelOutlineEdForm&quot;</span>, query=<span class="hljs-literal">True</span>, ca=<span class="hljs-literal">True</span>)[<span class="hljs-number">0</span>] <span class="hljs-comment">#Get the channel box&#x27;s layout</span><br>filterLayout = cmds.formLayout(<span class="hljs-string">&quot;GE_ui_scriptedPanelOutlineEdForm&quot;</span>, query=<span class="hljs-literal">True</span>, ca=<span class="hljs-literal">True</span>)[<span class="hljs-number">1</span>] <span class="hljs-comment">#Get the filter&#x27;s layout</span><br><br>myRowLayout =cmds.rowColumnLayout(numberOfColumns=<span class="hljs-number">2</span> ,cw=[(<span class="hljs-number">1</span>,<span class="hljs-number">105</span>),(<span class="hljs-number">2</span>,<span class="hljs-number">105</span>)],bgc=(<span class="hljs-number">0.2</span>,<span class="hljs-number">0.2</span>,<span class="hljs-number">0.2</span>), p=<span class="hljs-string">&quot;GE_ui_scriptedPanelOutlineEdForm&quot;</span>) <span class="hljs-comment">#Create a row layout </span><br>cmds.button(l=<span class="hljs-string">&quot;oaSmoothKeys&quot;</span>,bgc=(<span class="hljs-number">0.0</span>,<span class="hljs-number">0.0</span>,<span class="hljs-number">0.3</span>) , command=(<span class="hljs-string">&#x27;oaSmoothkeys()&#x27;</span>))<br>cmds.button(l=<span class="hljs-string">&quot;Get value&quot;</span>, command=(<span class="hljs-string">&#x27;Get()&#x27;</span>))<br>cmds.button(l=<span class="hljs-string">&quot;TranslateX&quot;</span>,bgc=(<span class="hljs-number">0.6</span>,<span class="hljs-number">0.6</span>,<span class="hljs-number">0.6</span>),command=(<span class="hljs-string">&#x27;Opt_Tx()&#x27;</span>))<br>cmds.floatField(<span class="hljs-string">&#x27;TranslateX_V&#x27;</span>,bgc = (<span class="hljs-number">0.1</span>,<span class="hljs-number">0.1</span>,<span class="hljs-number">0.1</span>), v =TranslateX)<br><br>cmds.button(l=<span class="hljs-string">&quot;TranslateY&quot;</span>,bgc=(<span class="hljs-number">0.6</span>,<span class="hljs-number">0.6</span>,<span class="hljs-number">0.6</span>),command=(<span class="hljs-string">&#x27;Opt_Ty()&#x27;</span>))<br>cmds.floatField(<span class="hljs-string">&#x27;TranslateY_V&#x27;</span>,bgc = (<span class="hljs-number">0.1</span>,<span class="hljs-number">0.1</span>,<span class="hljs-number">0.1</span>), v = TranslateY)<br><br>cmds.button(l=<span class="hljs-string">&quot;TranslateZ&quot;</span>,bgc=(<span class="hljs-number">0.6</span>,<span class="hljs-number">0.6</span>,<span class="hljs-number">0.6</span>),command=(<span class="hljs-string">&#x27;Opt_Tz()&#x27;</span>))<br>cmds.floatField(<span class="hljs-string">&#x27;TranslateZ_V&#x27;</span>,bgc = (<span class="hljs-number">0.1</span>,<span class="hljs-number">0.1</span>,<span class="hljs-number">0.1</span>), v = TranslateZ)<br><br>cmds.button(l=<span class="hljs-string">&quot;RotateX&quot;</span>,bgc=(<span class="hljs-number">0.6</span>,<span class="hljs-number">0.6</span>,<span class="hljs-number">0.6</span>),command=(<span class="hljs-string">&#x27;RotateX_Doit()&#x27;</span>))<br>cmds.floatField(<span class="hljs-string">&#x27;RotateX_V&#x27;</span>,bgc = (<span class="hljs-number">0.1</span>,<span class="hljs-number">0.1</span>,<span class="hljs-number">0.1</span>), v = RotateX)<br><br>cmds.button(l=<span class="hljs-string">&quot;RotateY&quot;</span>,bgc=(<span class="hljs-number">0.6</span>,<span class="hljs-number">0.6</span>,<span class="hljs-number">0.6</span>),command=(<span class="hljs-string">&#x27;RotateY_Doit()&#x27;</span>))<br>cmds.floatField(<span class="hljs-string">&#x27;RotateY_V&#x27;</span>,bgc = (<span class="hljs-number">0.1</span>,<span class="hljs-number">0.1</span>,<span class="hljs-number">0.1</span>), v = RotateY)<br><br>cmds.button(l=<span class="hljs-string">&quot;RotateZ&quot;</span>,bgc=(<span class="hljs-number">0.6</span>,<span class="hljs-number">0.6</span>,<span class="hljs-number">0.6</span>),command=(<span class="hljs-string">&#x27;RotateZ_Doit()&#x27;</span>))<br>cmds.floatField(<span class="hljs-string">&#x27;RotateZ_V&#x27;</span>,bgc = (<span class="hljs-number">0.1</span>,<span class="hljs-number">0.1</span>,<span class="hljs-number">0.1</span>), v = RotateZ)<br><br>cmds.button(l=<span class="hljs-string">&quot;Set_Keyframe&quot;</span>,bgc = (<span class="hljs-number">0.0</span>,<span class="hljs-number">0.8</span>,<span class="hljs-number">0</span>), command=(<span class="hljs-string">&#x27;setkeyframe()&#x27;</span>))<br>cmds.button(l=<span class="hljs-string">&quot;Value Zero&quot;</span>,bgc = (<span class="hljs-number">0.8</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>), command=(<span class="hljs-string">&#x27;ValueZero_Doit()&#x27;</span>))<br><br><span class="hljs-comment"># cmds.text(&quot;Time Slider&quot;)</span><br><span class="hljs-comment"># cmds.separator ( h=20, style=&#x27;none&#x27;) </span><br><br><span class="hljs-comment"># cmds.intField(&#x27;startTimeField&#x27;,bgc = (0.1,0.1,0.1), v = cmds.playbackOptions(ast = minV ,min = minV))</span><br><span class="hljs-comment"># cmds.intField(&#x27;endTimeField&#x27;,bgc = (0.1,0.1,0.1), v = cmds.playbackOptions(aet =maxV, max =  maxV))</span><br>cmds.separator ( h=<span class="hljs-number">2</span>, style=<span class="hljs-string">&#x27;none&#x27;</span>,bgc = (<span class="hljs-number">0.8</span>,<span class="hljs-number">0.0</span>,<span class="hljs-number">0.0</span>)) <br>cmds.separator ( h=<span class="hljs-number">2</span>, style=<span class="hljs-string">&#x27;none&#x27;</span>,bgc = (<span class="hljs-number">0.8</span>,<span class="hljs-number">0.0</span>,<span class="hljs-number">0.0</span>)) <br><br><span class="hljs-comment">#This will reorder the content of the left formLayout</span><br>cmds.formLayout(<span class="hljs-string">&quot;GE_ui_scriptedPanelOutlineEdForm&quot;</span>, edit=<span class="hljs-literal">True</span>, af=[ \<br>            (channelLayout, <span class="hljs-string">&quot;bottom&quot;</span>, <span class="hljs-number">0</span>), \<br>            (channelLayout, <span class="hljs-string">&quot;right&quot;</span>, <span class="hljs-number">0</span>),  \<br>            (filterLayout, <span class="hljs-string">&quot;top&quot;</span>, <span class="hljs-number">0</span>),  \<br>            (myRowLayout, <span class="hljs-string">&quot;left&quot;</span>, <span class="hljs-number">0</span>),  \<br>            (myRowLayout, <span class="hljs-string">&quot;right&quot;</span>, <span class="hljs-number">0</span>)],  \<br>            ac=[(myRowLayout, <span class="hljs-string">&quot;top&quot;</span>, <span class="hljs-number">0</span>, filterLayout), \<br>            (channelLayout, <span class="hljs-string">&quot;top&quot;</span>, <span class="hljs-number">0</span>, myRowLayout)])<br></code></pre></td></tr></table></figure>          </div><h3 id="python3"><a href="#python3" class="headerlink" title="python3"></a>python3</h3><div class="note note-info">            <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pymel.core <span class="hljs-keyword">as</span> pm<br><span class="hljs-keyword">import</span> maya.cmds <span class="hljs-keyword">as</span> cmds<br><br><br><span class="hljs-keyword">if</span> cmds.window(<span class="hljs-string">&quot;GE_ui_window&quot;</span>, exists=<span class="hljs-literal">True</span>): <span class="hljs-comment">#If the window exists</span><br>    cmds.deleteUI(<span class="hljs-string">&quot;GE_ui_window&quot;</span>) <span class="hljs-comment">#Delete it</span><br><br>cmds.window(<span class="hljs-string">&quot;GE_ui_window&quot;</span>, title=<span class="hljs-string">&quot;My custom Graph Editor&quot;</span>) <span class="hljs-comment">#Create your custom win</span><br>cmds.frameLayout(<span class="hljs-string">&quot;GE_ui_frameLayout&quot;</span>, p=<span class="hljs-string">&quot;GE_ui_window&quot;</span>, lv=<span class="hljs-literal">False</span>, bv=<span class="hljs-literal">False</span> ) <br><br><br><span class="hljs-keyword">if</span> cmds.scriptedPanel(<span class="hljs-string">&quot;GE_ui_scriptedPanel&quot;</span>, exists=<span class="hljs-literal">True</span>): <span class="hljs-comment">#If the scriptel panel already exists</span><br>    cmds.deleteUI(<span class="hljs-string">&quot;GE_ui_scriptedPanel&quot;</span>) <span class="hljs-comment">#Delete it</span><br>cmds.scriptedPanel(<span class="hljs-string">&quot;GE_ui_scriptedPanel&quot;</span>, unParent=<span class="hljs-literal">True</span>, <span class="hljs-built_in">type</span>=<span class="hljs-string">&quot;graphEditor&quot;</span>)<br>cmds.scriptedPanel( <span class="hljs-string">&quot;GE_ui_scriptedPanel&quot;</span>, e=<span class="hljs-literal">True</span>, parent=<span class="hljs-string">&quot;GE_ui_window|GE_ui_frameLayout&quot;</span>) <span class="hljs-comment">#parent the scripted panel to your frame layout</span><br><br><br>TranslateX = <span class="hljs-number">0</span><br>TranslateY = <span class="hljs-number">0</span><br>TranslateZ = <span class="hljs-number">0</span><br>RotateX = <span class="hljs-number">0</span><br>RotateY = <span class="hljs-number">0</span><br>RotateZ = <span class="hljs-number">0</span><br>    <br>minV = <span class="hljs-literal">False</span><br>maxV = <span class="hljs-literal">False</span><br><br>kf_list = []<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">sl</span>():<br>    depNodeName = cmds.ls(sl = <span class="hljs-literal">True</span>)<br>    <span class="hljs-keyword">if</span> depNodeName:<br>        depNodeName = cmds.ls(sl = <span class="hljs-literal">True</span>)[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">else</span>:<br>        depNodeName = cmds.ls(sl = <span class="hljs-literal">True</span>)<br>    <span class="hljs-keyword">return</span> depNodeName<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Get</span>():<br>    TranslateX = cmds.getAttr(sl() + <span class="hljs-string">&#x27;.translateX&#x27;</span>)<br>    cmds.floatField(<span class="hljs-string">&#x27;TranslateX_V&#x27;</span>, e=<span class="hljs-number">1</span>,v = TranslateX )<br>    TranslateY = cmds.getAttr(sl() + <span class="hljs-string">&#x27;.translateY&#x27;</span>)<br>    cmds.floatField(<span class="hljs-string">&#x27;TranslateY_V&#x27;</span>, e=<span class="hljs-number">1</span>,v = TranslateY )<br>    TranslateZ = cmds.getAttr(sl() + <span class="hljs-string">&#x27;.translateZ&#x27;</span>)<br>    cmds.floatField(<span class="hljs-string">&#x27;TranslateZ_V&#x27;</span>, e=<span class="hljs-number">1</span>,v = TranslateZ )<br>    RotateX = cmds.getAttr(sl() + <span class="hljs-string">&#x27;.rotateX&#x27;</span>)<br>    cmds.floatField(<span class="hljs-string">&#x27;RotateX_V&#x27;</span>, e=<span class="hljs-number">1</span>,v = RotateX )<br>    RotateY = cmds.getAttr(sl() + <span class="hljs-string">&#x27;.rotateY&#x27;</span>)<br>    cmds.floatField(<span class="hljs-string">&#x27;RotateY_V&#x27;</span>, e=<span class="hljs-number">1</span>,v = RotateY )<br>    RotateZ = cmds.getAttr(sl() + <span class="hljs-string">&#x27;.rotateZ&#x27;</span>)<br>    cmds.floatField(<span class="hljs-string">&#x27;RotateZ_V&#x27;</span>, e=<span class="hljs-number">1</span>,v = RotateZ )<br>    <br>    time_v()<br>    <span class="hljs-comment">#global TranslateX, TranslateY, TranslateZ, RotateX, RotateY, RotateZ</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">oaSmoothkeys</span>():<br>    curves=cmds.keyframe(q=<span class="hljs-number">1</span>, name=<span class="hljs-number">1</span>)<br>    <span class="hljs-comment">#Get the selected curves</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(curves) == <span class="hljs-number">0</span>:<br>        cmds.mel.error(<span class="hljs-string">&quot;Select at least 3 keys in the Graph Editor.&quot;</span>)<br>        <span class="hljs-comment">#Go</span><br>        <br>    prevVal = []<br>    currVal = []<br>    nextVal = []<br>    average = <span class="hljs-number">0.0</span><br>    keys = []<br>    <span class="hljs-comment">#frame numbers</span><br>    sizeOfKeys = <span class="hljs-number">0</span><br>    dupCurve = []<br>    dupCurveVal = []<br>    <span class="hljs-keyword">for</span> curve <span class="hljs-keyword">in</span> curves:<br>        keys=cmds.keyframe(curve, q=<span class="hljs-number">1</span>, sl=<span class="hljs-number">1</span>)<br>        <span class="hljs-comment">#Get the selected keys</span><br>        sizeOfKeys=<span class="hljs-built_in">len</span>(keys)<br>        <span class="hljs-comment">#The first and last key will not be touched.</span><br>        <span class="hljs-comment">#Therefore there must be at least 3 keys selected.</span><br>        <span class="hljs-keyword">if</span> sizeOfKeys&lt;<span class="hljs-number">3</span>:<br>            <span class="hljs-keyword">continue</span><br>            <span class="hljs-comment">#Duplicate the curve to store values in</span><br>            <br>        dupCurve=cmds.duplicate(curve)<br>        <span class="hljs-comment">#Start with frame 2, don&#x27;t touch last frame</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,sizeOfKeys - <span class="hljs-number">1</span>):<br>            prevVal=cmds.keyframe(curve, q=<span class="hljs-number">1</span>, vc=<span class="hljs-number">1</span>, time=(keys[i - <span class="hljs-number">1</span>],keys[i - <span class="hljs-number">1</span>]))<br>            currVal=cmds.keyframe(curve, q=<span class="hljs-number">1</span>, vc=<span class="hljs-number">1</span>, time=(keys[i],keys[i]))<br>            nextVal=cmds.keyframe(curve, q=<span class="hljs-number">1</span>, vc=<span class="hljs-number">1</span>, time=(keys[i + <span class="hljs-number">1</span>],keys[i + <span class="hljs-number">1</span>]))<br>            <span class="hljs-comment">#Calculate average</span><br>            average= (prevVal[<span class="hljs-number">0</span>] + currVal[<span class="hljs-number">0</span>] + nextVal[<span class="hljs-number">0</span>]) / <span class="hljs-number">3</span><br>            <span class="hljs-comment">#Store the value in the dup curve</span><br>            cmds.keyframe(dupCurve[<span class="hljs-number">0</span>], valueChange=average, absolute=<span class="hljs-number">1</span>, time=(keys[i],keys[i]))<br>            <br>        <span class="hljs-comment">#Apply the new values</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,sizeOfKeys - <span class="hljs-number">1</span>):<br>            dupCurveVal=cmds.keyframe(dupCurve[<span class="hljs-number">0</span>], q=<span class="hljs-number">1</span>, vc=<span class="hljs-number">1</span>, time=(keys[i],keys[i]))<br>            cmds.keyframe(curve, valueChange=dupCurveVal[<span class="hljs-number">0</span>], absolute=<span class="hljs-number">1</span>, time=(keys[i],keys[i]))<br>            <br>        cmds.delete(dupCurve[<span class="hljs-number">0</span>])<br><br>        <br><span class="hljs-comment">#if have a animLayer or not animLayer attr change name</span><br><span class="hljs-comment"># sample  1.original:   [ pSphere1_translateX ]</span><br><span class="hljs-comment">#         2.layer:      [ pSphere1_translateX_AnimLayer1_inputB ]</span><br><span class="hljs-comment">#         3.merge layer:[ pSphere1_translateX_Merged_Layer_inputB ]</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Sel_Attr</span>():<br>    crvAll = []<br>    <span class="hljs-keyword">for</span> atr <span class="hljs-keyword">in</span> cmds.listAttr(sl(),k=<span class="hljs-number">1</span>):<br>        <span class="hljs-comment"># print atr</span><br>        connectAtrs = cmds.listConnections(<span class="hljs-string">&#x27;%s.%s&#x27;</span>%(sl(),atr))<br>        <span class="hljs-comment"># print connectAtrs</span><br>        getAniCrv = cmds.ls(connectAtrs,typ=<span class="hljs-string">&#x27;animCurve&#x27;</span>)<br>        crvAll += getAniCrv<br>        <br>        <span class="hljs-keyword">if</span> getAniCrv:<br>            crvAll += getAniCrv<br>        <span class="hljs-keyword">if</span> connectAtrs:<br>            <span class="hljs-keyword">for</span> cta <span class="hljs-keyword">in</span> connectAtrs:<br>        <span class="hljs-comment"># print &#x27;----&#x27;, cta</span><br>                crvAll += cmds.listConnections(cta,<span class="hljs-built_in">type</span>=<span class="hljs-string">&#x27;animCurve&#x27;</span>)<span class="hljs-keyword">or</span> []<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">pass</span><br>        <span class="hljs-comment"># print connectAtrs</span><br>        Tx = [v <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> crvAll <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;translateX&quot;</span> <span class="hljs-keyword">in</span> v <span class="hljs-keyword">or</span> <span class="hljs-string">&quot;TranslateX1&quot;</span> <span class="hljs-keyword">in</span> v]<br>        Ty = [v <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> crvAll <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;translateY&quot;</span> <span class="hljs-keyword">in</span> v <span class="hljs-keyword">or</span> <span class="hljs-string">&quot;TranslateY1&quot;</span> <span class="hljs-keyword">in</span> v]<br>        Tz = [v <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> crvAll <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;translateZ&quot;</span> <span class="hljs-keyword">in</span> v <span class="hljs-keyword">or</span> <span class="hljs-string">&quot;TranslateZ1&quot;</span> <span class="hljs-keyword">in</span> v]<br>        Rx = [v <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> crvAll <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;rotate&quot;</span> <span class="hljs-keyword">in</span> v <span class="hljs-keyword">and</span> <span class="hljs-string">&quot;X&quot;</span> <span class="hljs-keyword">in</span> v <span class="hljs-keyword">or</span> <span class="hljs-string">&quot;inRotateX&quot;</span> <span class="hljs-keyword">in</span> v]<br>        Ry = [v <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> crvAll <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;rotate&quot;</span> <span class="hljs-keyword">in</span> v <span class="hljs-keyword">and</span> <span class="hljs-string">&quot;Y&quot;</span> <span class="hljs-keyword">in</span> v <span class="hljs-keyword">or</span> <span class="hljs-string">&quot;inRotateY&quot;</span> <span class="hljs-keyword">in</span> v]<br>        Rz = [v <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> crvAll <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;rotate&quot;</span> <span class="hljs-keyword">in</span> v <span class="hljs-keyword">and</span> <span class="hljs-string">&quot;Z&quot;</span> <span class="hljs-keyword">in</span> v <span class="hljs-keyword">or</span> <span class="hljs-string">&quot;inRotateZ&quot;</span> <span class="hljs-keyword">in</span> v]<br>    <span class="hljs-keyword">return</span> Tx, Ty, Tz, Rx, Ry, Rz<br>  <br><br><span class="hljs-comment">#Combine 2 lists into 1 dictionary</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Opt_Tx</span>():<br>    cmds.selectKey(Sel_Attr()[<span class="hljs-number">0</span>])<br>    cmds.FrameSelected()<br>    Get()<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Opt_Ty</span>():<br>    cmds.selectKey(Sel_Attr()[<span class="hljs-number">1</span>])<br>    cmds.FrameSelected()<br>    Get()<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Opt_Tz</span>():<br>    cmds.FrameSelected()<br>    cmds.selectKey(Sel_Attr()[<span class="hljs-number">2</span>])<br>    Get()<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">RotateX_Doit</span>():<br>    cmds.FrameSelected()<br>    cmds.selectKey(Sel_Attr()[<span class="hljs-number">3</span>])<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">RotateY_Doit</span>():<br>    cmds.FrameSelected()<br>    cmds.selectKey(Sel_Attr()[<span class="hljs-number">4</span>])<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">RotateZ_Doit</span>():<br>    cmds.FrameSelected()<br>    cmds.selectKey(Sel_Attr()[<span class="hljs-number">5</span>])<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">time_v</span>():<br>    n1 = cmds.keyframe(sl(), q =<span class="hljs-literal">True</span>)<br>    minV = <span class="hljs-built_in">min</span>(n1)<br>    maxV = <span class="hljs-built_in">max</span>(n1)<br>    cmds.playbackOptions(<span class="hljs-built_in">min</span> =minV, <span class="hljs-built_in">max</span> =  maxV)<br>    <br>    <span class="hljs-comment">#global minV , maxV</span><br><br><br><span class="hljs-comment">#Combine 2 lists into 1 dictionary</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">setkeyframe</span>():<br>    selobj = cmds.keyframe(q=<span class="hljs-number">1</span>,n=<span class="hljs-number">1</span>)<br>    <span class="hljs-built_in">min</span> = minV<br>    <span class="hljs-built_in">max</span> = maxV<br>    <br>    axial_V = []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> selobj:<br>        <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;translateX&#x27;</span> <span class="hljs-keyword">in</span> i:<br>            axial_V = <span class="hljs-string">&#x27;.tx&#x27;</span><br>            <span class="hljs-built_in">print</span> (axial_V)<br>        <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;translateY&#x27;</span> <span class="hljs-keyword">in</span> i:<br>            axial_V = <span class="hljs-string">&#x27;.ty&#x27;</span><br>            <span class="hljs-built_in">print</span> (axial_V)<br>        <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;translateZ&#x27;</span> <span class="hljs-keyword">in</span> i:<br>            axial_V = <span class="hljs-string">&#x27;.tz&#x27;</span><br>            <span class="hljs-built_in">print</span> (axial_V)<br>        <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;rotate&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;X&#x27;</span> <span class="hljs-keyword">in</span> i:<br>            axial_V = <span class="hljs-string">&#x27;.rx&#x27;</span><br>            <span class="hljs-built_in">print</span> (axial_V)<br>        <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;rotate&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;Y&#x27;</span> <span class="hljs-keyword">in</span> i:<br>            axial_V = <span class="hljs-string">&#x27;.ry&#x27;</span><br>            <span class="hljs-built_in">print</span> (axial_V)<br>        <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;rotate&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;Z&#x27;</span> <span class="hljs-keyword">in</span> i:<br>            axial_V = <span class="hljs-string">&#x27;.rz&#x27;</span><br>            <span class="hljs-built_in">print</span> (axial_V)<br>            <br>    val_list = cmds.keyframe(sl() + axial_V, q = <span class="hljs-literal">True</span>, vc= <span class="hljs-literal">True</span>)<br>    key_list = cmds.keyframe(sl() + axial_V, q = <span class="hljs-literal">True</span>)<br>    <br>    <span class="hljs-comment"># print key_list, val_list</span><br>    kv_list = <span class="hljs-built_in">zip</span>(key_list,val_list)<br>    kv_list = <span class="hljs-built_in">sorted</span>(kv_list,key=<span class="hljs-keyword">lambda</span> x:x[<span class="hljs-number">0</span>])<br>    <br>    <span class="hljs-keyword">if</span> kf_list:<br>        kf_list = []<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">pass</span><br>           <br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(kv_list)):<br>        key, value = kv_list[i]<br>        bi, ai = i-<span class="hljs-number">1</span>, i+<span class="hljs-number">1</span><br>        <span class="hljs-comment">#If first is equal to -1 or the latter value is greater than the length -1 to skip </span><br>        <span class="hljs-keyword">if</span> bi == -<span class="hljs-number">1</span> <span class="hljs-keyword">or</span> ai &gt; (<span class="hljs-built_in">len</span>(kv_list)-<span class="hljs-number">1</span>):<span class="hljs-keyword">continue</span><br>        <br>        <span class="hljs-keyword">if</span> kv_list[i][<span class="hljs-number">0</span>] == <span class="hljs-built_in">min</span> +<span class="hljs-number">1</span> <span class="hljs-keyword">or</span> kv_list[i][<span class="hljs-number">0</span>] == <span class="hljs-built_in">max</span> -<span class="hljs-number">1</span>:<br>            <span class="hljs-comment"># Get the smallest keyframe of the length</span><br>            <span class="hljs-keyword">if</span> kv_list[i][<span class="hljs-number">0</span>] == <span class="hljs-built_in">min</span> +<span class="hljs-number">1</span>:<br>                    kf_list.append(<span class="hljs-built_in">min</span>)      <br>            <span class="hljs-comment"># Get the largest keyframe in length</span><br>            <span class="hljs-keyword">if</span> kv_list[i][<span class="hljs-number">0</span>] == <span class="hljs-built_in">max</span> -<span class="hljs-number">1</span>:            <br>                    kf_list.append(<span class="hljs-built_in">max</span>)<br>        <span class="hljs-comment">#Get the most extreme keyframe in length</span><br>        <span class="hljs-keyword">if</span> kv_list[i][<span class="hljs-number">1</span>] &gt; kv_list[bi][<span class="hljs-number">1</span>] <span class="hljs-keyword">and</span> kv_list[i][<span class="hljs-number">1</span>] &gt; kv_list[ai][<span class="hljs-number">1</span>]:<br>                kf_list.append(key)<br>        <span class="hljs-keyword">if</span> kv_list[i][<span class="hljs-number">1</span>] &lt; kv_list[bi][<span class="hljs-number">1</span>] <span class="hljs-keyword">and</span> kv_list[i][<span class="hljs-number">1</span>] &lt; kv_list[ai][<span class="hljs-number">1</span>]:<br>                kf_list.append(key)<br>            <br>    <span class="hljs-comment">#global kf_list</span><br>    <br>    pm.mel.animLayerEditorOnSelect(<span class="hljs-string">&quot;BaseAnimation&quot;</span>, <span class="hljs-number">0</span>)<br>    cmds.animLayer((sl()), at = sl() ,aso =<span class="hljs-number">1</span> ) <br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> kf_list:<br>        cmds.setKeyframe(<span class="hljs-built_in">id</span> = <span class="hljs-literal">True</span>, t= (i), bd = <span class="hljs-literal">True</span>)        <br>              <br><span class="hljs-comment">#Value zero</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">ValueZero_Doit</span>():<br>    selobj = cmds.keyframe(q=<span class="hljs-number">1</span>,n=<span class="hljs-number">1</span>)<br>    <br>    axial_V = []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> selobj:<br>        <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;X&#x27;</span> <span class="hljs-keyword">in</span> i:<br>            axial_V = <span class="hljs-string">&#x27;.tx&#x27;</span><br>            cmds.currentTime(minV)<br>            TranslateX = cmds.getAttr(sl() + <span class="hljs-string">&#x27;.translateX&#x27;</span>)<br>            cmds.keyframe(an=<span class="hljs-string">&#x27;keys&#x27;</span>,r=<span class="hljs-number">1</span>, vc =(<span class="hljs-number">0</span> -TranslateX))<br>            Get()<br>            <span class="hljs-built_in">print</span> (axial_V)<br>        <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;Y&#x27;</span> <span class="hljs-keyword">in</span> i:<br>            axial_V = <span class="hljs-string">&#x27;.ty&#x27;</span><br>            TranslateY = cmds.getAttr(sl() + <span class="hljs-string">&#x27;.translateY&#x27;</span>)<br>            cmds.keyframe(an=<span class="hljs-string">&#x27;keys&#x27;</span>,r=<span class="hljs-number">1</span>, vc =(<span class="hljs-number">0</span>-TranslateY))<br>            Get()<br>            <span class="hljs-built_in">print</span> (axial_V)<br>        <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;Z&#x27;</span>  <span class="hljs-keyword">in</span> i:<br>            axial_V = <span class="hljs-string">&#x27;.tz&#x27;</span><br>            cmds.currentTime(minV)<br>            TranslateZ = cmds.getAttr(sl() + <span class="hljs-string">&#x27;.translateZ&#x27;</span>)<br>            cmds.keyframe(an=<span class="hljs-string">&#x27;keys&#x27;</span>,r=<span class="hljs-number">1</span>, vc =(<span class="hljs-number">0</span>-TranslateZ))<br>            Get()<br>            <span class="hljs-built_in">print</span> (axial_V)<br>        <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;rotate&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;X&#x27;</span> <span class="hljs-keyword">in</span> i:<br>            axial_V = <span class="hljs-string">&#x27;.rx&#x27;</span><br>            <span class="hljs-built_in">print</span> (axial_V)<br>        <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;rotate&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;Y&#x27;</span> <span class="hljs-keyword">in</span> i:<br>            axial_V = <span class="hljs-string">&#x27;.ry&#x27;</span><br>            <span class="hljs-built_in">print</span> (axial_V)<br>        <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;rotate&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;Z&#x27;</span> <span class="hljs-keyword">in</span> i:<br>            axial_V = <span class="hljs-string">&#x27;.rz&#x27;</span><br>            <span class="hljs-built_in">print</span> (axial_V)<br><br>cmds.showWindow(<span class="hljs-string">&quot;GE_ui_window&quot;</span>)<br><br>channelLayout = cmds.formLayout(<span class="hljs-string">&quot;GE_ui_scriptedPanelOutlineEdForm&quot;</span>, query=<span class="hljs-literal">True</span>, ca=<span class="hljs-literal">True</span>)[<span class="hljs-number">0</span>] <span class="hljs-comment">#Get the channel box&#x27;s layout</span><br>filterLayout = cmds.formLayout(<span class="hljs-string">&quot;GE_ui_scriptedPanelOutlineEdForm&quot;</span>, query=<span class="hljs-literal">True</span>, ca=<span class="hljs-literal">True</span>)[<span class="hljs-number">1</span>] <span class="hljs-comment">#Get the filter&#x27;s layout</span><br><br>myRowLayout =cmds.rowColumnLayout(numberOfColumns=<span class="hljs-number">2</span> ,cw=[(<span class="hljs-number">1</span>,<span class="hljs-number">105</span>),(<span class="hljs-number">2</span>,<span class="hljs-number">105</span>)],bgc=(<span class="hljs-number">0.2</span>,<span class="hljs-number">0.2</span>,<span class="hljs-number">0.2</span>), p=<span class="hljs-string">&quot;GE_ui_scriptedPanelOutlineEdForm&quot;</span>) <span class="hljs-comment">#Create a row layout </span><br>cmds.button(l=<span class="hljs-string">&quot;oaSmoothKeys&quot;</span>,bgc=(<span class="hljs-number">0.0</span>,<span class="hljs-number">0.0</span>,<span class="hljs-number">0.3</span>) , command=(<span class="hljs-string">&#x27;oaSmoothkeys()&#x27;</span>))<br>cmds.button(l=<span class="hljs-string">&quot;Get value&quot;</span>, command=(<span class="hljs-string">&#x27;Get()&#x27;</span>))<br>cmds.button(l=<span class="hljs-string">&quot;TranslateX&quot;</span>,bgc=(<span class="hljs-number">0.6</span>,<span class="hljs-number">0.6</span>,<span class="hljs-number">0.6</span>),command=(<span class="hljs-string">&#x27;Opt_Tx()&#x27;</span>))<br>cmds.floatField(<span class="hljs-string">&#x27;TranslateX_V&#x27;</span>,bgc = (<span class="hljs-number">0.1</span>,<span class="hljs-number">0.1</span>,<span class="hljs-number">0.1</span>), v =TranslateX)<br><br>cmds.button(l=<span class="hljs-string">&quot;TranslateY&quot;</span>,bgc=(<span class="hljs-number">0.6</span>,<span class="hljs-number">0.6</span>,<span class="hljs-number">0.6</span>),command=(<span class="hljs-string">&#x27;Opt_Ty()&#x27;</span>))<br>cmds.floatField(<span class="hljs-string">&#x27;TranslateY_V&#x27;</span>,bgc = (<span class="hljs-number">0.1</span>,<span class="hljs-number">0.1</span>,<span class="hljs-number">0.1</span>), v = TranslateY)<br><br>cmds.button(l=<span class="hljs-string">&quot;TranslateZ&quot;</span>,bgc=(<span class="hljs-number">0.6</span>,<span class="hljs-number">0.6</span>,<span class="hljs-number">0.6</span>),command=(<span class="hljs-string">&#x27;Opt_Tz()&#x27;</span>))<br>cmds.floatField(<span class="hljs-string">&#x27;TranslateZ_V&#x27;</span>,bgc = (<span class="hljs-number">0.1</span>,<span class="hljs-number">0.1</span>,<span class="hljs-number">0.1</span>), v = TranslateZ)<br><br>cmds.button(l=<span class="hljs-string">&quot;RotateX&quot;</span>,bgc=(<span class="hljs-number">0.6</span>,<span class="hljs-number">0.6</span>,<span class="hljs-number">0.6</span>),command=(<span class="hljs-string">&#x27;RotateX_Doit()&#x27;</span>))<br>cmds.floatField(<span class="hljs-string">&#x27;RotateX_V&#x27;</span>,bgc = (<span class="hljs-number">0.1</span>,<span class="hljs-number">0.1</span>,<span class="hljs-number">0.1</span>), v = RotateX)<br><br>cmds.button(l=<span class="hljs-string">&quot;RotateY&quot;</span>,bgc=(<span class="hljs-number">0.6</span>,<span class="hljs-number">0.6</span>,<span class="hljs-number">0.6</span>),command=(<span class="hljs-string">&#x27;RotateY_Doit()&#x27;</span>))<br>cmds.floatField(<span class="hljs-string">&#x27;RotateY_V&#x27;</span>,bgc = (<span class="hljs-number">0.1</span>,<span class="hljs-number">0.1</span>,<span class="hljs-number">0.1</span>), v = RotateY)<br><br>cmds.button(l=<span class="hljs-string">&quot;RotateZ&quot;</span>,bgc=(<span class="hljs-number">0.6</span>,<span class="hljs-number">0.6</span>,<span class="hljs-number">0.6</span>),command=(<span class="hljs-string">&#x27;RotateZ_Doit()&#x27;</span>))<br>cmds.floatField(<span class="hljs-string">&#x27;RotateZ_V&#x27;</span>,bgc = (<span class="hljs-number">0.1</span>,<span class="hljs-number">0.1</span>,<span class="hljs-number">0.1</span>), v = RotateZ)<br><br>cmds.button(l=<span class="hljs-string">&quot;Set_Keyframe&quot;</span>,bgc = (<span class="hljs-number">0.0</span>,<span class="hljs-number">0.8</span>,<span class="hljs-number">0</span>), command=(<span class="hljs-string">&#x27;setkeyframe()&#x27;</span>))<br>cmds.button(l=<span class="hljs-string">&quot;Value Zero&quot;</span>,bgc = (<span class="hljs-number">0.8</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>), command=(<span class="hljs-string">&#x27;ValueZero_Doit()&#x27;</span>))<br><br><span class="hljs-comment"># cmds.text(&quot;Time Slider&quot;)</span><br><span class="hljs-comment"># cmds.separator ( h=20, style=&#x27;none&#x27;) </span><br><br><span class="hljs-comment"># cmds.intField(&#x27;startTimeField&#x27;,bgc = (0.1,0.1,0.1), v = cmds.playbackOptions(ast = minV ,min = minV))</span><br><span class="hljs-comment"># cmds.intField(&#x27;endTimeField&#x27;,bgc = (0.1,0.1,0.1), v = cmds.playbackOptions(aet =maxV, max =  maxV))</span><br>cmds.separator ( h=<span class="hljs-number">2</span>, style=<span class="hljs-string">&#x27;none&#x27;</span>,bgc = (<span class="hljs-number">0.8</span>,<span class="hljs-number">0.0</span>,<span class="hljs-number">0.0</span>)) <br>cmds.separator ( h=<span class="hljs-number">2</span>, style=<span class="hljs-string">&#x27;none&#x27;</span>,bgc = (<span class="hljs-number">0.8</span>,<span class="hljs-number">0.0</span>,<span class="hljs-number">0.0</span>)) <br><br><span class="hljs-comment">#This will reorder the content of the left formLayout</span><br>cmds.formLayout(<span class="hljs-string">&quot;GE_ui_scriptedPanelOutlineEdForm&quot;</span>, edit=<span class="hljs-literal">True</span>, af=[ \<br>            (channelLayout, <span class="hljs-string">&quot;bottom&quot;</span>, <span class="hljs-number">0</span>), \<br>            (channelLayout, <span class="hljs-string">&quot;right&quot;</span>, <span class="hljs-number">0</span>),  \<br>            (filterLayout, <span class="hljs-string">&quot;top&quot;</span>, <span class="hljs-number">0</span>),  \<br>            (myRowLayout, <span class="hljs-string">&quot;left&quot;</span>, <span class="hljs-number">0</span>),  \<br>            (myRowLayout, <span class="hljs-string">&quot;right&quot;</span>, <span class="hljs-number">0</span>)],  \<br>            ac=[(myRowLayout, <span class="hljs-string">&quot;top&quot;</span>, <span class="hljs-number">0</span>, filterLayout), \<br>            (channelLayout, <span class="hljs-string">&quot;top&quot;</span>, <span class="hljs-number">0</span>, myRowLayout)])<br></code></pre></td></tr></table></figure>          </div>]]></content>
    
    
    <categories>
      
      <category>maya</category>
      
    </categories>
    
    
    <tags>
      
      <tag>maya</tag>
      
      <tag>tool</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Follow Object</title>
    <link href="/codeArt-TechBlog/2024/06/29/Follow_object/"/>
    <url>/codeArt-TechBlog/2024/06/29/Follow_object/</url>
    
    <content type="html"><![CDATA[<h2 id="Follow-object"><a href="#Follow-object" class="headerlink" title="Follow object"></a>Follow object</h2><video width= "900" controls><source src= "/codeArt-TechBlog/video/maya/followObject.mp4" type="video/mp4"></video><h3 id="GUI"><a href="#GUI" class="headerlink" title="GUI"></a>GUI</h3><img src="/codeArt-TechBlog/img/maya/followObj.png" width="300" style="display: block; margin-left: 0;"><h3 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">step1. Select your A_object<br><br>step2. Check the B_object you want to follow<br><br>step3. Check your time <span class="hljs-built_in">range</span><br><br>step4. Apply<br></code></pre></td></tr></table></figure><h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#~~ IMPORT - Area ~~#</span><br><br><span class="hljs-keyword">import</span> maya.cmds <span class="hljs-keyword">as</span> cmds<br><span class="hljs-keyword">import</span> maya.mel <span class="hljs-keyword">as</span> mel<br><br><span class="hljs-comment">#~~ End of IMPORT Area ~~#</span><br><br><span class="hljs-comment">#~~ Script - Area ~~#</span><br><br>WindowWinUi=<span class="hljs-string">&quot;TargetFollow&quot;</span> <span class="hljs-comment">#Here must to add &#x27; and &#x27; to be &#x27;xxxxxxxx&#x27;</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">zarmWppsWinExe</span>(<span class="hljs-params">*args</span>):<br>    <span class="hljs-keyword">if</span> cmds.window(WindowWinUi, exists = <span class="hljs-literal">True</span>):<br>        cmds.deleteUI(WindowWinUi)<br><br>        <br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Doit</span>():<br>    stime = cmds.intField( <span class="hljs-string">&#x27;startTimeField&#x27;</span>, q=<span class="hljs-number">1</span>, v=<span class="hljs-number">1</span> )<br>    etime = cmds.intField( <span class="hljs-string">&#x27;endTimeField&#x27;</span>, q=<span class="hljs-number">1</span>, v=<span class="hljs-number">1</span> ) + <span class="hljs-number">1</span><br>    time = stime<br>    sel = cmds.ls(sl = <span class="hljs-literal">True</span>)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(stime,etime):<br>        cmds.currentTime(i)<br>        cmds.xform( sel[<span class="hljs-number">0</span>],ws=<span class="hljs-number">1</span>, m=cmds.xform(sel[<span class="hljs-number">1</span>],q=<span class="hljs-number">1</span>,ws=<span class="hljs-number">1</span>,m=<span class="hljs-number">1</span>) )<br>        cmds.setKeyframe(sel[<span class="hljs-number">0</span>])<br><br><span class="hljs-comment">#~~ End of Script Area ~~#q</span><br><br><span class="hljs-comment">#~~ UI - Area ~~#</span><br>zarmWppsWinExe()<br><br>cmds.window(WindowWinUi,bgc=(<span class="hljs-number">0.5</span>,<span class="hljs-number">0.5</span>,<span class="hljs-number">0.5</span>) )<br><br><span class="hljs-comment">#~~ Contents ~~#</span><br><br>cmds.columnLayout(<span class="hljs-string">&quot;A&quot;</span>)<br><br>cmds.rowColumnLayout(p=<span class="hljs-string">&quot;A&quot;</span>,nc=<span class="hljs-number">1</span>,cw=[(<span class="hljs-number">1</span>,<span class="hljs-number">100</span>)])<br><br>cmds.text( label=<span class="hljs-string">&#x27;Target Object:&#x27;</span>)<br><br>cmds.separator ( h=<span class="hljs-number">5</span>, style=<span class="hljs-string">&#x27;none&#x27;</span>)<br><br>cmds.button(l=<span class="hljs-string">&quot;Apply&quot;</span>,bgc=(<span class="hljs-number">0.5</span>,<span class="hljs-number">0.8</span>,<span class="hljs-number">0.5</span>), command=(<span class="hljs-string">&#x27;Doit()&#x27;</span>))<br><br>cmds.separator ( h=<span class="hljs-number">5</span>, style=<span class="hljs-string">&#x27;none&#x27;</span>)<br><br>cmds.text( label=<span class="hljs-string">&#x27;Time Range:&#x27;</span>)<br><br>cmds.rowColumnLayout(p=<span class="hljs-string">&quot;A&quot;</span>,nc=<span class="hljs-number">3</span>,cw=[(<span class="hljs-number">1</span>,<span class="hljs-number">100</span>),(<span class="hljs-number">2</span>,<span class="hljs-number">100</span>)])<br><br>cmds.intField(<span class="hljs-string">&#x27;startTimeField&#x27;</span>, v=cmds.playbackOptions( q=<span class="hljs-number">1</span>, <span class="hljs-built_in">min</span>=<span class="hljs-number">1</span>))<br><br>cmds.intField(<span class="hljs-string">&#x27;endTimeField&#x27;</span>, v=cmds.playbackOptions( q=<span class="hljs-number">1</span>, <span class="hljs-built_in">max</span>=<span class="hljs-number">1</span> ))<br><br><br><span class="hljs-comment">#~~ Contents ~~#</span><br><br>cmds.showWindow(WindowWinUi)<br>cmds.window(WindowWinUi,e=<span class="hljs-number">1</span>,wh=(<span class="hljs-number">204</span>,<span class="hljs-number">102</span>),s=<span class="hljs-number">1</span> )<br>cmds.window(WindowWinUi,q=<span class="hljs-number">1</span>,wh=<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>maya</category>
      
    </categories>
    
    
    <tags>
      
      <tag>maya</tag>
      
      <tag>tool</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Make Hammer 3 hits combo in Unity</title>
    <link href="/codeArt-TechBlog/2024/06/28/Make_Hammer_3_hits_combo_in_Unity/"/>
    <url>/codeArt-TechBlog/2024/06/28/Make_Hammer_3_hits_combo_in_Unity/</url>
    
    <content type="html"><![CDATA[<h2 id="Unity-Game-Play-View"><a href="#Unity-Game-Play-View" class="headerlink" title="Unity Game Play View"></a>Unity Game Play View</h2>  <video width="850" controls>  <source src="/codeArt-TechBlog/video/Hammer3Hit.mp4" type="video/mp4">  </video><h2 id="Design-and-Thoughts-Hammer-3-hits-combo"><a href="#Design-and-Thoughts-Hammer-3-hits-combo" class="headerlink" title="Design and Thoughts Hammer 3 hits combo"></a>Design and Thoughts Hammer 3 hits combo</h2><h3 id="key-pose-and-spacing"><a href="#key-pose-and-spacing" class="headerlink" title="key pose and spacing"></a>key pose and spacing</h3><ol><li>重量感 key pose and spacing</li><li>誇張 key pose</li><li>重量緩衝預備</li><li>重量與動作拉扯感</li></ol><h3 id="遊戲攻擊節奏-spacing"><a href="#遊戲攻擊節奏-spacing" class="headerlink" title="遊戲攻擊節奏 spacing"></a>遊戲攻擊節奏 spacing</h3><ol><li><p>強調重型武器的重量感，預備與緩衝動作間距小且速度慢，攻擊動作間距大且速度快，如下圖以 Attack 02 為例</p><ul><li>Attack02<img src="/codeArt-TechBlog/img/unity/Attack02.png" width="800" style="display: block; margin-left: 0;"></li></ul></li><li><p>重型武器，hits ( atk01-40 frames、atk02-33 frames、atk03-56 frames ) 如下參考 3 hit combo</p><ul><li>當攻擊間距較大且速度快與預備緩衝間距小且速度慢，會形成反差的對比，玩家在體感上也較可以明顯感受武器的重量 <video width="800" controls> <source src="/codeArt-TechBlog/video/3_hit_combo_motion_trail.mp4" type="video/mp4"> </video></li></ul></li></ol><h2 id="Import-process-and-settings-build-game"><a href="#Import-process-and-settings-build-game" class="headerlink" title="Import process and settings &amp; build game"></a>Import process and settings &amp; build game</h2><h3 id="maya-export-fbx-option-item"><a href="#maya-export-fbx-option-item" class="headerlink" title="maya export fbx option item"></a>maya export fbx option item</h3><h4 id="option"><a href="#option" class="headerlink" title="option"></a>option</h4><img src="/codeArt-TechBlog/img/unity/mayaExportFbx.png" width="400" style="display: block; margin-left: 0;"><ol><li>Axis Conversion (座標軸轉換)：這個選項允許你設置座標軸之間的轉換。你可以根據目標應用程序的座標系統來調整轉換方式，以確保FBX文件在其他軟件中的位置和方向正確。</li><li>Animation (動畫)：<ul><li>Bake Animation (烘焙動畫)：烘焙動畫將動畫數據轉換為關鍵幀，並將其嵌入到FBX文件中。這有助於確保在其他軟件中播放動畫時的一致性和準確性。</li><li>Animation Layers (動畫層)：選擇是否導出使用了動畫層的動畫數據。</li><li>Deformed Models (變形模型)：選擇是否導出變形模型，包括綁定的皮膚、骨骼和權重等信息。</li><li>Constraints (約束)：選擇是否導出場景中的約束條件，例如點約束、方向約束等。</li></ul></li><li>Geometry (幾何體)：<ul><li>Smoothing Groups (平滑群組)：選擇是否導出平滑群組信息，以保留模型的平滑外觀。</li><li>Tangents and Binormals (切線和副法線)：選擇是否導出切線和副法線信息，用於光照和渲染效果。</li><li>Skins (蒙皮)：選擇是否導出模型的蒙皮信息，用於骨骼變形。</li><li>Blend Shapes (形狀融合)：選擇是否導出形狀融合信息，用於模型的表情和變形。</li></ul></li><li>Cameras (相機)：選擇是否導出場景中的相機信息，包括位置、方向、焦距等。<br>HFOV (Unreal)<br>VFOF (Unity)</li><li>Lights (燈光)：選擇是否導出場景中的燈光信息，包括位置、類型、光強度等。</li><li>Embed Media (嵌入媒體)：選擇是否將媒體文件嵌入到FBX文件中。這包括導出使用的紋理貼圖、材質、音頻文件等。如果你選擇嵌入媒體，那麼FBX文件將成為一個獨立的文件，不再需要依賴外部媒體文件。</li><li>Embed Textures (嵌入紋理)：選擇是否將紋理貼圖嵌入到FBX文件中。如果你選擇嵌入紋理，那麼紋理文件將成為FBX文件的一部分，不再需要單獨的紋理文件。</li><li>Up Axis (上軸)：設置FBX文件中的上軸方向。根據不同的應用程序和預設設置，你可以選擇將上軸設置為X、Y或Z軸。</li><li>Collada (DAE) Options (Collada (DAE) 選項)：如果你要導出Collada格式（.dae），你可以在這裡設置相關選項，例如導出點約束、動畫等。</li><li>Constraints (約束)：選擇是否導出場景中的約束信息，例如鏈接約束、點約束等。</li><li>Include Cameras (包括相機)：選擇是否導出場景中的相機。</li><li>Include Lights (包括燈光)：選擇是否導出場景中的燈光。</li></ol><h3 id="Setting-up-the-animation-and-blending-attributes："><a href="#Setting-up-the-animation-and-blending-attributes：" class="headerlink" title="Setting up the animation and blending attributes："></a>Setting up the animation and blending attributes：</h3><h4 id="animation-assets"><a href="#animation-assets" class="headerlink" title="animation assets"></a>animation assets</h4><img src="/codeArt-TechBlog/img/unity/animation_assets.png" width="400" style="display: block; margin-left: 0;"><h4 id="Setting-up-the-animation-and-blending-attributes"><a href="#Setting-up-the-animation-and-blending-attributes" class="headerlink" title="Setting up the animation and blending attributes."></a>Setting up the animation and blending attributes.</h4><img src="/codeArt-TechBlog/img/unity/Setting_up_the_animation_and_blending.png" width="800" style="display: block; margin-left: 0;"><h3 id="create-player-camera"><a href="#create-player-camera" class="headerlink" title="create player_camera"></a>create player_camera</h3><h4 id="CameraFollow-cs"><a href="#CameraFollow-cs" class="headerlink" title="CameraFollow.cs"></a>CameraFollow.cs</h4><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs cs"><span class="hljs-keyword">using</span> UnityEngine;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CameraFollow</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>  <span class="hljs-keyword">public</span> Transform target; <span class="hljs-comment">// 角色的 Transform</span><br>  <span class="hljs-keyword">public</span> Vector3 offset;   <span class="hljs-comment">// 相機和角色之間的偏移量</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-built_in">float</span> smoothSpeed = <span class="hljs-number">0.125f</span>; <span class="hljs-comment">// 平滑跟隨的速度</span><br><br>  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">LateUpdate</span>()</span><br>  &#123;<br>      <span class="hljs-comment">// 計算相機應該的位置</span><br>      Vector3 desiredPosition = target.position + offset;<br>      <span class="hljs-comment">// 平滑移動相機到目標位置</span><br>      Vector3 smoothedPosition = Vector3.Lerp(transform.position, desiredPosition, smoothSpeed);<br>      transform.position = smoothedPosition;<br><br>      <span class="hljs-comment">// 確保相機朝向角色</span><br>      transform.LookAt(target);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="create-scene-props"><a href="#create-scene-props" class="headerlink" title="create scene &amp; props"></a>create scene &amp; props</h3><h4 id="assets："><a href="#assets：" class="headerlink" title="assets："></a>assets：</h4><img src="/codeArt-TechBlog/img/unity/env_assets.png" width="400" style="display: block; margin-left: 0;"><h4 id="processing："><a href="#processing：" class="headerlink" title="processing："></a>processing：</h4><p><video width="800" controls><source src="/codeArt-TechBlog/video/unity/create_scene.mp4" type="video/mp4"></video></p><h3 id="add-sounds-to-gameplay"><a href="#add-sounds-to-gameplay" class="headerlink" title="add sounds to gameplay"></a>add sounds to gameplay</h3><h4 id="sounds-assets"><a href="#sounds-assets" class="headerlink" title="sounds assets"></a>sounds assets</h4>   <img src="/codeArt-TechBlog/img/unity/audio_assets.png" width="400" style="display: block; margin-left: 0;"><h4 id="setup-in-animation-then-add-events-to-frmes-bar"><a href="#setup-in-animation-then-add-events-to-frmes-bar" class="headerlink" title="setup in animation then add events to frmes bar"></a>setup in animation then add events to frmes bar</h4>   <img src="/codeArt-TechBlog/img/unity/add_event_setup.png" width="400" style="display: block; margin-left: 0;"><h3 id="setup-animator-controller"><a href="#setup-animator-controller" class="headerlink" title="setup animator controller"></a>setup animator controller</h3><h4 id="controller-assets"><a href="#controller-assets" class="headerlink" title="controller assets"></a>controller assets</h4><img src="/codeArt-TechBlog/img/unity/setup_animator_controller.png" width="400" style="display: block; margin-left: 0;"><h3 id="animator-controller"><a href="#animator-controller" class="headerlink" title="animator controller"></a>animator controller</h3><video width="800" controls><source src="/codeArt-TechBlog/video/unity/animator_controller.mp4" type="video/mp4"></video><h3 id="sciprts"><a href="#sciprts" class="headerlink" title="sciprts"></a>sciprts</h3><h4 id="scripts-assets"><a href="#scripts-assets" class="headerlink" title="scripts assets"></a>scripts assets</h4><img src="/codeArt-TechBlog/img/unity/scripts.png" width="400" style="display: block; margin-left: 0;"><h4 id="Attack-cs"><a href="#Attack-cs" class="headerlink" title="Attack.cs"></a>Attack.cs</h4><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><code class="hljs cs"><span class="hljs-keyword">using</span> System.Collections;<br><span class="hljs-keyword">using</span> System.Collections.Generic;<br><span class="hljs-keyword">using</span> UnityEngine;<br><span class="hljs-keyword">using</span> UnityEngine.Audio;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Attack</span> : <span class="hljs-title">MonoBehaviour</span><br>&#123;<br>    <span class="hljs-keyword">private</span> Animator animator;<br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">bool</span> isAttacking = <span class="hljs-literal">false</span>;<br>    <span class="hljs-keyword">private</span> AudioSource audioSource;<br>    <span class="hljs-keyword">public</span> AudioClip attackSound01;  <span class="hljs-comment">// Attack01 的音效檔</span><br>    <span class="hljs-keyword">public</span> AudioClip attackSound02;  <span class="hljs-comment">// Attack02 的音效檔</span><br>    <span class="hljs-keyword">public</span> AudioClip attackSound03;  <span class="hljs-comment">// Attack03 的音效檔</span><br><br><br>    <span class="hljs-comment">// Start is called before the first frame update</span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>()</span><br>    &#123;<br>        animator = GetComponent&lt;Animator&gt;();<br>        audioSource = GetComponent&lt;AudioSource&gt;();<br><br>        <span class="hljs-keyword">if</span> (audioSource == <span class="hljs-literal">null</span>)<br>        &#123;<br>            Debug.LogError(<span class="hljs-string">&quot;AudioSource component is missing!&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// Update is called once per frame</span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>()</span><br>    &#123;<br>        <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.Mouse0))<br>        &#123;<br>            HandleAttack();<br>        &#125;<br><br>        <span class="hljs-comment">// 檢查當前動畫狀態，如果不是攻擊動畫，則重置攻擊狀態</span><br>        AnimatorStateInfo currentState = animator.GetCurrentAnimatorStateInfo(<span class="hljs-number">0</span>);<br>        <span class="hljs-keyword">if</span> (isAttacking &amp;&amp; !currentState.IsName(<span class="hljs-string">&quot;ANI_Player_Warhammer_Attack01&quot;</span>) &amp;&amp; <br>                          !currentState.IsName(<span class="hljs-string">&quot;ANI_Player_Warhammer_Attack02&quot;</span>) &amp;&amp; <br>                          !currentState.IsName(<span class="hljs-string">&quot;ANI_Player_Warhammer_Attack03&quot;</span>))<br>        &#123;<br>            isAttacking = <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">HandleAttack</span>()</span><br>    &#123;<br>        <span class="hljs-keyword">var</span> currentState = animator.GetCurrentAnimatorStateInfo(<span class="hljs-number">0</span>);<br>        Debug.Log(<span class="hljs-string">&quot;Current State: &quot;</span> + currentState.fullPathHash);<br><br>        <span class="hljs-keyword">if</span> (currentState.IsName(<span class="hljs-string">&quot;ANI_Player_Warhammer_Attack02&quot;</span>))<br>        &#123;<br>            <span class="hljs-comment">// 如果當前的動畫狀態是 Attack02，立即觸發 Attack03</span><br>            Debug.Log(<span class="hljs-string">&quot;Triggering Attack03&quot;</span>);<br>            animator.SetTrigger(<span class="hljs-string">&quot;Attack03Trigger&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (currentState.IsName(<span class="hljs-string">&quot;ANI_Player_Warhammer_Attack01&quot;</span>))<br>        &#123;<br>            <span class="hljs-comment">// 如果當前的動畫狀態是 Attack01，立即觸發 Attack02</span><br>            Debug.Log(<span class="hljs-string">&quot;Triggering Attack02&quot;</span>);<br>            animator.SetTrigger(<span class="hljs-string">&quot;Attack02Trigger&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            <span class="hljs-comment">// 否則，觸發 Attack01</span><br>            Debug.Log(<span class="hljs-string">&quot;Triggering Attack01&quot;</span>);<br>            isAttacking = <span class="hljs-literal">true</span>;<br>            animator.SetTrigger(<span class="hljs-string">&quot;Attack01Trigger&quot;</span>);<br>        &#125;<br>        <br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">PlayAttackSound</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> attackNumber</span>)</span><br>    &#123;<br>        Debug.Log(<span class="hljs-string">&quot;Attempting to play sound&quot;</span>);<br>        AudioClip clipToPlay = <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">switch</span> (attackNumber)<br>        &#123;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<br>                clipToPlay = attackSound01;<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<br>                clipToPlay = attackSound02;<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<br>                clipToPlay = attackSound03;<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-literal">default</span>:<br>                Debug.LogError(<span class="hljs-string">&quot;Invalid attack number!&quot;</span>);<br>                <span class="hljs-keyword">return</span>;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (clipToPlay != <span class="hljs-literal">null</span> &amp;&amp; audioSource != <span class="hljs-literal">null</span>)<br>        &#123;<br>            Debug.Log(<span class="hljs-string">&quot;AudioSource and AudioClip are set correctly&quot;</span>);<br>            audioSource.PlayOneShot(clipToPlay);<br>            Debug.Log(<span class="hljs-string">&quot;Playing Attack Sound &quot;</span> + attackNumber);<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            <span class="hljs-keyword">if</span> (clipToPlay == <span class="hljs-literal">null</span>)<br>            &#123;<br>                Debug.LogError(<span class="hljs-string">&quot;Attack sound is not set!&quot;</span>);<br>            &#125;<br>            <span class="hljs-keyword">if</span> (audioSource == <span class="hljs-literal">null</span>)<br>            &#123;<br>                Debug.LogError(<span class="hljs-string">&quot;AudioSource component is missing!&quot;</span>);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Unity</category>
      
    </categories>
    
    
    <tags>
      
      <tag>maya</tag>
      
      <tag>Unity</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>FBX Exporter workflow</title>
    <link href="/codeArt-TechBlog/2024/05/14/FBX_Exporter_workflow/"/>
    <url>/codeArt-TechBlog/2024/05/14/FBX_Exporter_workflow/</url>
    
    <content type="html"><![CDATA[<h1 id="Step-by-Step"><a href="#Step-by-Step" class="headerlink" title="Step by Step:"></a>Step by Step:</h1><h3 id="Acquisition-and-installation"><a href="#Acquisition-and-installation" class="headerlink" title="Acquisition and installation"></a>Acquisition and installation</h3><h3 id="Unity-fbxExport-（實機操作演示）"><a href="#Unity-fbxExport-（實機操作演示）" class="headerlink" title="Unity fbxExport （實機操作演示）"></a>Unity fbxExport （實機操作演示）</h3><h3 id="mesh-置換"><a href="#mesh-置換" class="headerlink" title="mesh 置換"></a>mesh 置換</h3><h3 id="animation-更新"><a href="#animation-更新" class="headerlink" title="animation 更新"></a>animation 更新</h3><h3 id="Visibility-switch-on-off"><a href="#Visibility-switch-on-off" class="headerlink" title="Visibility switch on off"></a>Visibility switch on off</h3><h3 id="light-加入"><a href="#light-加入" class="headerlink" title="light 加入"></a>light 加入</h3><h3 id="更換材質"><a href="#更換材質" class="headerlink" title="更換材質"></a>更換材質</h3><h3 id="camera-導入-Game-CAMERA-視角"><a href="#camera-導入-Game-CAMERA-視角" class="headerlink" title="camera 導入 Game CAMERA 視角"></a>camera 導入 Game CAMERA 視角</h3><h3 id="加入屬性控制-點擊-take-001-檔更新"><a href="#加入屬性控制-點擊-take-001-檔更新" class="headerlink" title="加入屬性控制 點擊 take 001 檔更新"></a>加入屬性控制 點擊 take 001 檔更新</h3>]]></content>
    
    
    <categories>
      
      <category>Unity</category>
      
    </categories>
    
    
    <tags>
      
      <tag>maya</tag>
      
      <tag>Unity</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
